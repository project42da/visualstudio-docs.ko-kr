---
title: Visual Studio에서 부하 테스트를 위한 부하 패턴 | Microsoft Docs
ms.date: 10/19/2016
ms.topic: conceptual
helpviewer_keywords:
- load tests, load patterns
- load tests, scenarios
- load tests, virtual users
ms.assetid: 0ba0363b-7f50-4bde-a919-0e3bce7bc115
author: gewarren
ms.author: gewarren
manager: douge
ms.technology: vs-ide-test
ms.openlocfilehash: 7a6d9054bb12290d29247c09263a3854f2ea0dad
ms.sourcegitcommit: 6a9d5bd75e50947659fd6c837111a6a547884e2a
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/16/2018
---
# <a name="edit-load-patterns-to-model-virtual-user-activities"></a>모델 가상 사용자 동작에 대한 부하 패턴 편집

부하 패턴 속성은 부하 테스트 중에 시뮬레이션된 사용자 부하가 조정되는 방식을 지정합니다. Visual Studio에서는 상수, 단계, 목표 기반 등의 세 가지 부하 패턴을 기본적으로 제공합니다. 부하 패턴을 선택하고 부하 테스트 목표에 맞는 적절한 수준으로 속성을 조정합니다.

부하 패턴은 시나리오의 구성 요소입니다. 시나리오 그리고 정의된 부하 패턴으로 부하 테스트가 구성됩니다.

> [!NOTE]
> 모든 부하 패턴 중에서 Visual Studio가 생성하는 부하는 가상 사용자의 시뮬레이션된 부하입니다.

## <a name="load-patterns"></a>부하 패턴

### <a name="constant"></a>상수

 일정 부하 패턴은 부하 테스트를 실행하는 동안 변경되지 않는 사용자 부하를 지정하는 데 사용됩니다. 예를 들어, 웹 응용 프로그램에서 스모크 테스트를 실행하는 경우 일정 부하를 사용자 10명으로 적게 설정할 수 있습니다.

#### <a name="constant-load-pattern-considerations"></a>일정 부하 패턴 고려 사항

 일정 부하 패턴은 부하 테스트를 실행하는 동안 사용자 부하를 동일하게 하는 데 사용됩니다. 사용자 수가 많은 일정 부하 패턴을 사용하면 부하 테스트 시작 시 서버 사용량이 비정상적이고 비현실적으로 높아질 수 있으므로 주의해야 합니다. 예를 들어 부하 테스트에 홈 페이지에 대한 요청으로 시작하는 웹 테스트가 포함되어 있는 경우 부하 테스트를 사용자 수가 1,000명인 일정 부하로 설정하면 부하 테스트 시 처음 1,000개의 요청이 가능한 한 빠르게 홈 페이지로 전송됩니다. 이는 실제 웹 사이트 이용과는 거리가 먼 시뮬레이션입니다. 이 문제를 완화하려면 사용자 수를 1,000명까지 점차적으로 늘리는 단계 부하 패턴을 사용하거나 부하 테스트 실행 설정에서 준비 시간을 지정하는 것이 좋습니다. 준비 시간을 지정하면 부하 테스트에서는 자동으로 준비 시간 동안 부하가 점차적으로 늘어납니다. 자세한 내용은 [시나리오 시작 시간 지연 구성](../test/configure-scenario-start-delays.md)을 참조하세요.

### <a name="step"></a>단계

 단계 부하 패턴은 시간의 경과에 따라 정의한 최대 사용자 부하까지 증가하는 사용자 부하를 지정하는 데 사용됩니다. 부하를 단계별로 실행하려면 **초기 사용자 수**, **최대 사용자 수**, **단계 시간(초)** 및 **단계 사용자 수**를 지정합니다.

 예를 들어, **초기 사용자 수**가 1, **최대 사용자 수**가 100, **단계 시간(초)** 이 10, **단계 사용자 수**가 1인 단계 부하의 경우 1에서 시작하여 사용자 수가 100이 될 때까지 10초마다 1씩 증가하는 사용자 부하 패턴이 만들어집니다.

> [!NOTE]
>  총 테스트 지속 시간이 최대 사용자 부하까지 도달하는 데 필요한 시간보다 짧은 경우 테스트는 총 테스트 지속 시간이 경과한 다음 중지되며 최대 사용자 수 목표에 도달하지 못합니다.

 단계 부하를 사용하여 서버가 성능이 현저히 저하되는 지점에 도달할 때까지 부하를 증가시킬 수 있습니다. 부하가 증가하면 서버에서는 결국 리소스가 부족하게 됩니다. 단계 부하는 이러한 상황이 발생하는 시점의 사용자 수를 결정할 때 유용합니다. 또한 단계 부하를 사용하는 경우 에이전트에서 필요한 부하를 생성할 수 있는지 에이전트 리소스도 자세히 모니터링해야 합니다.

 일반적으로 지정한 부하에 대해 정확한 측정값을 구하려면 단계 시간과 단계 사용자 수를 달리하여 테스트를 여러 번 실행해야 합니다. 부하 상태에서 사용자가 추가됨에 따라 각 단계에 대한 초기 스파이크가 발생하는 경우가 종종 있습니다. 부하를 해당 속도로 유지하여 시스템이 초기 스파이크에서 복구된 다음 시스템 성능을 측정할 수 있습니다.

#### <a name="step-load-pattern-considerations"></a>단계 부하 패턴 고려 사항

 단계 부하 패턴은 사용자 부하가 증가함에 따라 성능이 어떻게 달라지는지를 확인할 수 있도록 부하 테스트가 실행되는 도중 서버의 부하를 증가시키는 데 사용할 수 있습니다. 예를 들어 사용자 부하가 사용자 수 2,000명으로 증가할 때 서버의 성능을 확인하기 위해 다음 속성이 설정된 단계 부하 패턴을 사용하여 10시간 동안 부하 테스트를 실행할 수 있습니다.

-   초기 사용자 수: 100

-   최대 사용자 수: 2,000

-   단계 지속 시간(초): 1,800

-   단계 진입 시간(초): 20

-   단계 사용자 수: 100

 이러한 설정을 사용하면 30분(1,800초) 동안 사용자 수가 100명, 200명, 300명에서 최대 2,000명인 사용자 부하 상태로 부하 테스트가 실행됩니다. **단계 진입 시간** 속성은 이러한 속성 중 유일하게 부하 테스트 새로 만들기 마법사에서 선택할 수 없는 속성이므로 신중하게 지정해야 합니다. 이 속성을 사용하면 사용자 수를 100명에서 200명으로 늘리는 것과 같이 한 단계에서 다음 단계로 부하를 증가시키는 작업이 즉각적으로가 아니라 점차적으로 이루어지도록 할 수 있습니다. 이 예에서는 20초 동안 사용자 부하가 100명에서 200명으로 증가하므로 1초에 5명씩 사용자가 늘어납니다. 자세한 내용은 [방법: 단계 부하 패턴에 대한 단계 진입 시간 속성 지정](../test/how-to-specify-the-step-ramp-time-property-for-a-step-load-pattern.md)을 참조하세요.

### <a name="goal-based"></a>목표 기반 부하

 목표 기반 부하 패턴은 단계 패턴과 유사하지만 사용자 부하를 주기적으로 조정하지 않고 성능 카운터 임계값을 기반으로 사용자 부하를 조정합니다. 목표 기반 부하는 다양한 용도로 사용하는 데 유용합니다.

-   에이전트 출력 최대화. 에이전트에서 주요 제한 메트릭을 측정하여 에이전트의 출력을 최대화합니다. 일반적으로 에이전트는 CPU이지만 메모리일 수도 있습니다.

-   대상 서버에서 일반적으로 CPU인 일부 대상 리소스 수준에 도달하여 해당 수준의 처리량 측정. 이렇게 하면 서버에서 리소스 사용 수준이 일정할 때의 처리량을 실행별로 비교할 수 있습니다.

-   서버에서 대상 처리량 수준에 도달

 아래 표에서는 다음 속성이 설정된 목표 기반 패턴 예제를 보여 줍니다.

|속성 그룹|속성|값|
|--------------------|--------------|-----------|
|성능 카운터|범주|프로세서|
|성능 카운터|컴퓨터|ContosoServer1|
|성능 카운터|카운터|% 프로세서 시간|
|성능 카운터|인스턴스|_Total|
|성능 카운터의 대상 범위|최대값|90|
|성능 카운터의 대상 범위|최소값|70|
|사용자 수 제한|초기 사용자 수|1|
|사용자 수 제한|최대 사용자 수|100|
|사용자 수 제한|최대 사용자 수 감소|5|
|사용자 수 제한|최대 사용자 수 증가|5|
|사용자 수 제한|최소 사용자 수|1|

 위와 같이 설정하면 **부하 테스트 분석기**에서 테스트 실행 도중 WebServer01의 `% Processor Time`에 대한 **카운터**가 `70%`에서 `90%.` 사이로 유지되도록 사용자 부하가 1에서 100까지 조정됩니다.

 각 사용자 부하를 조정하는 크기는 **최대 사용자 수 증가**와 **최대 사용자 수 감소** 설정에 따라 결정됩니다. 사용자 수 제한은 **최대 사용자 수**와 **최소 사용자 수** 속성에 따라 설정됩니다.

#### <a name="goal-based-load-pattern-considerations"></a>목표 기반 부하 패턴 고려 사항

 목표 기반 부하 패턴은 시스템의 리소스 사용률이 일정 수준에 도달하기 전에 시스템에서 지원할 수 있는 사용자 수를 확인하려는 경우에 유용합니다. 이 옵션은 시스템의 제한 리소스, 즉 병목 지점을 이미 파악한 경우에 사용하는 것이 가장 효과적입니다.

 예를 들어 시스템의 제한 리소스가 데이터베이스 서버의 CPU임을 파악한 경우 데이터베이스 서버의 CPU 사용률이 약 75%일 때 지원 가능한 사용자 수를 확인하려 한다고 가정합니다. 이 경우 성능 카운터 "% Processor Time"의 값을 70%에서 80% 사이로 유지하는 것을 목표로 하는 목표 기반 부하 패턴을 사용할 수 있습니다.

 이때 시스템의 처리량을 제한하는 다른 리소스가 있는지도 확인해야 합니다. 이러한 리소스가 있으면 목표 기반 부하 패턴에 지정된 목표에 도달하지 못할 수 있습니다. 또한 사용자 부하는 **최대 사용자 수**에 지정된 값에 도달할 때까지 계속 증가합니다. 이는 일반적으로 원하는 부하가 아니므로 목표 기반 부하 패턴에서 성능 카운터를 선택할 때는 주의해야 합니다.

## <a name="tasks"></a>작업

|작업|관련 항목|
|-----------|-----------------------|
|**부하 테스트에 대한 초기 부하 패턴 지정:** 부하 테스트 새로 만들기 마법사를 사용하여 부하 테스트를 만들 때 부하 패턴을 선택합니다.|-   [부하 패턴 변경](../test/edit-load-patterns-to-model-virtual-user-activities.md#EditingLoadPatternsChanging)|
|**부하 테스트에 대한 부하 패턴 편집:** 부하 테스트를 만든 다음, 부하 테스트 편집기에서 부하 패턴을 편집할 수 있습니다.|-   [방법: 단계 부하 패턴에 대한 단계 진입 시간 속성 지정](../test/how-to-specify-the-step-ramp-time-property-for-a-step-load-pattern.md)|
|**부하 테스트 시나리오의 가상 사용자에 웹 캐시 데이터를 포함해야 하는지 여부 지정:** **새 사용자의 백분율** 속성을 변경하여 부하 테스트가 가상 사용자의 웹 브라우저에서 수행되는 웹 캐싱을 시뮬레이션하는 방식을 조정할 수 있습니다.|-   [방법: 웹 캐시 데이터를 사용하는 가상 사용자 비율 지정](../test/how-to-specify-the-percentage-of-virtual-users-that-use-web-cache-data.md)|
|**단계 부하 패턴에 대한 단계 진입 시간 지정:** **단계 진입 시간** 속성을 사용하면 사용자 수를 100명에서 200명으로 늘리는 것과 같이 한 단계에서 다음 단계로 부하를 증가시키는 작업이 즉각적으로가 아니라 점차적으로 이루어지도록 할 수 있습니다.|-   [방법: 단계 부하 패턴에 대한 단계 진입 시간 속성 지정](../test/how-to-specify-the-step-ramp-time-property-for-a-step-load-pattern.md)|

## <a name="changing-the-load-pattern"></a>부하 패턴 변경

 **부하 테스트 새로 만들기 마법사**를 사용하여 부하 테스트를 만든 다음, **부하 테스트 편집기**를 사용하여 시나리오에 연결된 부하 패턴 속성을 테스트 목표에 맞게 변경할 수 있습니다.

> [!NOTE]
>  부하 테스트 시나리오 속성과 해당 설명의 전체 목록을 보려면 [부하 테스트 시나리오 속성](../test/load-test-scenario-properties.md)을 참조하세요.

 부하 패턴은 부하 테스트 도중 활성화되는 가상 사용자 수와 새 사용자가 추가되는 비율을 지정합니다. 단계 패턴, 일정 패턴 및 목표 기반 패턴의 세 가지 패턴 중에서 선택할 수 있습니다. 자세한 내용은 [부하 테스트 시나리오에서 부하 패턴을 사용하여 가상 사용자 수 지정](../test/edit-load-patterns-to-model-virtual-user-activities.md)을 참조하세요.

> [!NOTE]
>  부하 테스트 플러그 인을 사용하여 프로그래밍 방식으로 부하 속성을 변경할 수도 있습니다. 자세한 내용은 [방법: 부하 테스트 플러그 인 만들기](../test/how-to-create-a-load-test-plug-in.md)를 참조하세요.

### <a name="to-change-the-load-pattern"></a>부하 패턴을 변경하려면

1.  부하 테스트를 엽니다.

2.  **부하 테스트 편집기**의 시나리오 폴더에서 부하 패턴을 편집할 시나리오를 확장하고 시나리오의 부하 패턴을 선택합니다.

    > [!NOTE]
    > 부하 패턴 노드의 내용은 부하 테스트의 시나리오 노드에 표시되는 것처럼 부하 테스트를 만들 때 선택한 부하 프로필을 반영하며 **상수 부하 프로필** 또는 **단계 부하 프로필** 중 하나일 수 있습니다.

3.  **F4** 키를 눌러 속성 창을 표시합니다.

     **부하 패턴** 및 **매개 변수** 범주가 속성 창에 표시됩니다.

4.  (선택 사항) **부하 패턴** 범주에서 **패턴** 속성을 변경합니다.

     선택할 수 있는 **패턴** 속성은 **단계**, **상수** 및 **목표 기반**입니다. 부하 패턴 유형에 대한 자세한 내용은 [부하 테스트 시나리오에서 부하 패턴을 사용하여 가상 사용자 수 지정](../test/edit-load-patterns-to-model-virtual-user-activities.md)을 참조하세요.

5.  (선택 사항) **매개 변수** 범주에서 값을 변경합니다.

    > [!NOTE]
    > **매개 변수**로 설정할 수 있는 값은 **패턴** 속성으로 선택한 값에 따라 다릅니다.

6.  속성 변경을 마친 다음, **파일** 메뉴에서 **저장**을 선택합니다. 그러면 새 부하 패턴으로 부하 테스트를 실행할 수 있습니다.

## <a name="see-also"></a>참고 항목

- [부하 테스트 시나리오 편집](../test/edit-load-test-scenarios.md)
- [방법: 웹 캐시 데이터를 사용하는 가상 사용자 비율 지정](../test/how-to-specify-the-percentage-of-virtual-users-that-use-web-cache-data.md)
- [방법: 단계 부하 패턴에 대한 단계 진입 시간 속성 지정](../test/how-to-specify-the-step-ramp-time-property-for-a-step-load-pattern.md)